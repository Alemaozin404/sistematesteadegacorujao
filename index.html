<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adega Coruj√£o | Gest√£o Pro Cloud</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Inter:wght@400;600;900&display=swap');
        :root { --gold: #d4af37; --bg-black: #050505; --danger: #ff4444; --success: #22c55e; }
        body { background-color: var(--bg-black); color: #fff; font-family: 'Inter', sans-serif; overflow-x: hidden; }
        .font-luxury { font-family: 'Cinzel', serif; }
        .gold-gradient { background: linear-gradient(to right, #d4af37, #f9e29c, #b8860b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .premium-card { 
            background: #111; border: 1px solid #222; border-radius: 2rem; padding: 20px; 
            cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; 
        }
        .premium-card:hover { border-color: var(--gold); transform: translateY(-5px); box-shadow: 0 10px 30px rgba(212, 175, 55, 0.1); }
        .img-container { height: 180px; display: flex; align-items: center; justify-content: center; background: radial-gradient(#222, #050505); border-radius: 1.5rem; margin-bottom: 15px; overflow: hidden; }
        .img-container img { max-height: 80%; transition: 0.5s; object-fit: contain; }
        .premium-card:hover .img-container img { transform: scale(1.1); }

        .modal-overlay { backdrop-filter: blur(12px); transition: 0.3s; background: rgba(0,0,0,0.8); }
        .modal-content { transform: scale(0.9); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .modal-active .modal-content { transform: scale(1); }

        .tab-btn { padding: 14px 28px; border-radius: 18px; font-size: 11px; font-weight: 900; text-transform: uppercase; background: #111; border: 2px solid #222; color: #666; transition: 0.3s; white-space: nowrap; }
        .tab-btn.active { border-color: var(--gold); color: var(--gold); background: #1a1a1a; }
        .pay-btn.active { border-color: var(--gold); color: var(--gold); background: rgba(212, 175, 55, 0.1); }
        .sub-pay-btn { flex: 1; padding: 12px; border-radius: 10px; border: 1px solid #333; font-size: 10px; font-weight: 900; text-transform: uppercase; color: #666; transition: 0.2s; background: #111; }
        .sub-pay-btn.active { border-color: #fff; color: #fff; background: #333; }

        .gaveta { background: #0a0a0a; border: 1px solid #222; border-radius: 15px; margin-bottom: 10px; overflow: hidden; }
        .gaveta-header { padding: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #111; }
        .gaveta-content { display: none; padding: 15px; border-top: 1px solid #222; }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="flex flex-col lg:flex-row min-h-screen">

    <main class="flex-1 p-6 lg:p-12">
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10">
            <div>
                <h1 class="text-5xl font-luxury gold-gradient tracking-tighter">Adega Coruj√£o</h1>
                <div class="flex gap-6 mt-6">
                    <button onclick="ui.mainTab('estoque')" id="btn-estoque" class="text-[#d4af37] text-sm font-black uppercase border-b-4 border-[#d4af37] pb-2">Invent√°rio</button>
                    <button onclick="ui.mainTab('historico')" id="btn-historico" class="text-zinc-600 text-sm font-black uppercase pb-2">Hist√≥rico</button>
                </div>
            </div>
            
            <div class="flex items-center gap-3">
                <button id="btn-toggle-delete" onclick="inventory.toggleDeleteMode()" class="bg-zinc-900 text-zinc-500 border border-zinc-800 px-6 py-4 rounded-2xl text-[10px] uppercase font-black hover:border-red-500 transition-all">Modo Gerenciamento</button>
                <button onclick="ui.openProductModal()" class="bg-white text-black px-8 py-4 rounded-2xl text-xs uppercase font-black">Novo Item</button>
            </div>
        </header>

        <div id="section-inventory">
            <div id="category-tabs" class="flex gap-3 overflow-x-auto pb-6 no-scrollbar mb-8">
                <button onclick="inventory.filter('TUDO')" class="tab-btn active">Tudo</button>
                <button onclick="inventory.filter('refrigerantes')" class="tab-btn">Refrigerantes</button>
                <button onclick="inventory.filter('Cervejas long leck')" class="tab-btn">Cervejas long leck</button>
                <button onclick="inventory.filter('gin')" class="tab-btn">Gin</button>
                <button onclick="inventory.filter('whisky')" class="tab-btn">Whisky</button>
                <button onclick="inventory.filter('vodkas')" class="tab-btn">Vodkas</button>
                <button onclick="inventory.filter('Long neck')" class="tab-btn">Long Neck</button>
                <button onclick="inventory.filter('cerveja lata')" class="tab-btn">cerveja lata</button>
                <button onclick="inventory.filter('kit')" class="tab-btn">kit</button>
            </div>
            <div id="inventory-grid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-8"></div>
        </div>

        <div id="section-historico" class="hidden">
            <div id="gavetas-container" class="max-w-4xl space-y-4"></div>
        </div>
    </main>

    <aside class="w-full lg:w-[450px] bg-[#080808] border-l border-zinc-900 flex flex-col p-10 sticky top-0 h-screen">
        <h2 class="text-2xl font-luxury mb-8">Pedido</h2>
        <div id="cart-items" class="flex-1 overflow-y-auto space-y-4"></div>
        
        <div class="mt-6 border-t border-zinc-900 pt-6">
            <p class="text-[10px] font-black text-zinc-600 uppercase mb-3">Forma de Pagamento</p>
            <div class="flex gap-2 mb-4">
                <button onclick="vendaSystem.setPay('Pix')" class="pay-btn flex-1 p-3 rounded-xl border border-zinc-800 text-[10px] font-black uppercase active" id="pay-Pix">Pix</button>
                <button onclick="vendaSystem.setPay('Dinheiro')" class="pay-btn flex-1 p-3 rounded-xl border border-zinc-800 text-[10px] font-black uppercase" id="pay-Dinheiro">Dinheiro</button>
                <button onclick="vendaSystem.setPay('Cart√£o')" class="pay-btn flex-1 p-3 rounded-xl border border-zinc-800 text-[10px] font-black uppercase" id="pay-Cart√£o">Cart√£o</button>
            </div>
            
            <div id="card-selection" class="hidden flex flex-col gap-2 p-4 bg-zinc-900/50 rounded-2xl border border-zinc-800 mb-4">
                <div class="flex gap-2">
                    <button onclick="vendaSystem.setCardSub('D√©bito')" class="sub-pay-btn" id="sub-D√©bito">D√©bito</button>
                    <button onclick="vendaSystem.setCardSub('Cr√©dito')" class="sub-pay-btn" id="sub-Cr√©dito">Cr√©dito</button>
                </div>
            </div>

            <div class="flex justify-between items-center mb-6">
                <span class="text-zinc-500 font-bold uppercase text-xs">Total</span>
                <span id="cart-total" class="text-4xl font-black text-white">R$ 0,00</span>
            </div>
            <button onclick="vendaSystem.finalizar()" class="w-full bg-[#d4af37] text-black py-6 rounded-2xl font-black uppercase text-sm hover:bg-[#b8860b] transition shadow-[0_0_20px_rgba(212,175,55,0.2)]">Finalizar Venda</button>
        </div>
    </aside>

    <div id="product-modal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
        <div class="modal-content bg-[#111] border border-zinc-800 w-full max-w-lg rounded-[2.5rem] p-8">
            <h2 id="modal-title" class="text-3xl font-luxury gold-gradient mb-8 text-center">Novo Item</h2>
            <div class="space-y-4">
                <input type="hidden" id="edit-id">
                <div class="grid grid-cols-2 gap-4">
                    <div class="col-span-2">
                        <label class="text-[10px] font-bold text-zinc-500 uppercase ml-2">Nome</label>
                        <input type="text" id="p-nome" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-4 mt-1 outline-none focus:border-[#d4af37]">
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-zinc-500 uppercase ml-2">Categoria</label>
                        <select id="p-cat" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-4 mt-1 outline-none">
                            <option value="refrigerantes">Refrigerantes</option>
                            <option value="Cervejas long leck">Cervejas long leck</option>
                            <option value="gin">Gin</option>
                            <option value="whisky">Whisky</option>
                            <option value="vodkas">Vodkas</option>
                            <option value="Long neck">Long Neck</option>
                            <option value="cerveja lata">cerveja lata</option>
                            <option value="kit">kit</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-zinc-500 uppercase ml-2">Estoque</label>
                        <input type="number" id="p-qtd" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-4 mt-1 outline-none">
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-zinc-500 uppercase ml-2">Pre√ßo Venda (R$)</label>
                        <input type="number" id="p-venda" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-4 mt-1 outline-none">
                    </div>
                    <div>
                        <label class="text-[10px] font-bold text-zinc-500 uppercase ml-2">Desconto (R$)</label>
                        <input type="number" id="p-desconto" placeholder="Opcional" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-4 mt-1 outline-none text-red-500">
                    </div>
                    <div class="col-span-2">
                        <label class="text-[10px] font-bold text-zinc-500 uppercase ml-2">URL da Imagem (Recomendado)</label>
                        <input type="text" id="p-img" placeholder="Cole o link da foto aqui" class="w-full bg-zinc-900 border border-zinc-800 rounded-xl p-4 mt-1 outline-none focus:border-[#d4af37]">
                        <p class="text-[8px] text-zinc-600 mt-2 px-2 uppercase">Use links do ImgBB ou Google Fotos para aparecer em todos os aparelhos.</p>
                    </div>
                </div>
                <div class="flex gap-4 mt-8">
                    <button onclick="ui.closeProductModal()" class="flex-1 text-zinc-500 font-bold uppercase text-xs">Cancelar</button>
                    <button onclick="inventory.saveProduct()" class="flex-2 bg-white text-black px-10 py-4 rounded-2xl font-black uppercase text-xs">Salvar Produto</button>
                </div>
            </div>
        </div>
    </div>

    <div id="receipt-modal" class="fixed inset-0 z-[60] hidden modal-overlay flex items-center justify-center p-4">
        <div class="modal-content bg-[#0a0a0a] border border-green-500/30 w-full max-w-md rounded-[2.5rem] p-10 shadow-[0_0_50px_rgba(34,197,94,0.1)] text-center">
            <div class="w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-6">
                <span class="text-4xl">‚úÖ</span>
            </div>
            <h3 class="text-2xl font-luxury text-green-500 mb-2">Venda Confirmada!</h3>
            <p id="rec-metodo" class="text-[10px] font-black uppercase text-zinc-500 tracking-widest mb-8"></p>
            <div id="rec-list" class="space-y-3 mb-8 text-left max-h-40 overflow-y-auto pr-2"></div>
            <div class="border-t border-zinc-800 pt-6 mb-8 flex justify-between items-center">
                <div class="text-left">
                    <p class="text-[10px] font-black text-zinc-500 uppercase">Total de Itens</p>
                    <p id="rec-qtd" class="text-xl font-black"></p>
                </div>
                <div class="text-right">
                    <p class="text-[10px] font-black text-zinc-500 uppercase">Valor Total</p>
                    <p id="rec-total" class="text-3xl font-black text-white"></p>
                </div>
            </div>
            <button onclick="ui.closeReceipt()" class="w-full bg-zinc-900 border border-zinc-800 text-white py-5 rounded-2xl font-black uppercase text-xs hover:bg-zinc-800 transition">Fechar Resumo</button>
        </div>
    </div>

    <script>
        // CONFIGURA√á√ÉO DO FIREBASE - SUBSTITUA PELOS SEUS DADOS
        const firebaseConfig = {
        apiKey: "AIzaSyA_AFJL8gwdcidtisa8hoN7l6imJynCGFc",
        authDomain: "adega-corujao.firebaseapp.com",
        projectId: "adega-corujao",
        storageBucket: "adega-corujao.firebasestorage.app",
        messagingSenderId: "618915929534",
        appId: "1:618915929534:web:ced1d5a46a9cc89bf3edef"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let currentFilter = "TUDO";
        let selectedPay = "Pix";
        let selectedCardType = "";
        let editMode = false;

        const inventory = {
            db: [],
            
            async init() {
                // Escuta mudan√ßas em tempo real no Firestore
                db.collection("produtos").onSnapshot((snapshot) => {
                    this.db = snapshot.docs.map(doc => ({id: doc.id, ...doc.data()}));
                    this.render();
                });
            },

            async saveProduct() {
                const id = document.getElementById('edit-id').value;
                const pVenda = parseFloat(document.getElementById('p-venda').value) || 0;
                const desc = parseFloat(document.getElementById('p-desconto').value) || 0;
                
                const data = {
                    nome: document.getElementById('p-nome').value,
                    cat: document.getElementById('p-cat').value,
                    qtd: parseInt(document.getElementById('p-qtd').value) || 0,
                    venda: pVenda,
                    promo: pVenda - desc,
                    temDesconto: desc > 0,
                    imagem: document.getElementById('p-img').value || 'https://via.placeholder.com/150'
                };

                if(id) {
                    await db.collection("produtos").doc(id).update(data);
                } else {
                    await db.collection("produtos").add(data);
                }

                ui.closeProductModal();
            },

            toggleDeleteMode() {
                editMode = !editMode;
                const btn = document.getElementById('btn-toggle-delete');
                btn.innerText = editMode ? "Sair do Gerenciamento" : "Modo Gerenciamento";
                btn.classList.toggle('bg-red-600', editMode);
                btn.classList.toggle('text-white', editMode);
                this.render();
            },

            async apagar(id) {
                if(confirm("Deseja deletar este item permanentemente?")) {
                    await db.collection("produtos").doc(id).delete();
                }
            },

            editItem(id) {
                const p = this.db.find(x => x.id === id);
                document.getElementById('edit-id').value = p.id;
                document.getElementById('p-nome').value = p.nome;
                document.getElementById('p-cat').value = p.cat;
                document.getElementById('p-qtd').value = p.qtd;
                document.getElementById('p-venda').value = p.venda;
                document.getElementById('p-desconto').value = p.temDesconto ? (p.venda - p.promo) : '';
                document.getElementById('p-img').value = p.imagem;
                document.getElementById('modal-title').innerText = "Editar Produto";
                ui.openProductModal();
            },

            filter(cat) {
                currentFilter = cat;
                document.querySelectorAll('.tab-btn').forEach(b => {
                    const btnText = b.innerText.toLowerCase();
                    b.classList.toggle('active', btnText === cat.toLowerCase() || (cat === 'TUDO' && btnText === 'tudo'));
                });
                this.render();
            },

            render() {
                const grid = document.getElementById('inventory-grid');
                const filtered = currentFilter === "TUDO" ? this.db : this.db.filter(i => i.cat === currentFilter);
                grid.innerHTML = filtered.map(item => `
                    <div class="premium-card" onclick="${editMode ? `inventory.editItem('${item.id}')` : `vendaSystem.adicionar('${item.id}')`}">
                        ${editMode ? `<button onclick="event.stopPropagation(); inventory.apagar('${item.id}')" class="absolute -top-2 -left-2 bg-red-500 w-10 h-10 rounded-full z-30 shadow-xl flex items-center justify-center">üóëÔ∏è</button>` : ''}
                        <div class="img-container">
                            <img src="${item.imagem}" onerror="this.src='https://via.placeholder.com/150'">
                            ${item.temDesconto ? `<span class="absolute top-4 right-4 bg-red-600 text-[9px] font-black px-3 py-1 rounded-full uppercase">Oferta</span>` : ''}
                        </div>
                        <h4 class="font-bold truncate text-lg">${item.nome}</h4>
                        <p class="text-[9px] text-zinc-500 uppercase tracking-widest mb-3">${item.cat}</p>
                        <div class="flex justify-between items-end mt-2">
                            <div>
                                ${item.temDesconto ? `<span class="text-[10px] text-zinc-500 line-through">R$ ${item.venda.toFixed(2)}</span><br>` : ''}
                                <span class="text-2xl font-black ${item.temDesconto ? 'text-red-500' : 'gold-gradient'}">R$ ${(item.temDesconto ? item.promo : item.venda).toFixed(2)}</span>
                            </div>
                            <div class="text-right">
                                <span class="block text-[8px] text-zinc-600 font-black uppercase">Estoque</span>
                                <span class="text-xs font-bold ${item.qtd < 5 ? 'text-red-500 animate-pulse' : 'text-zinc-300'}">${item.qtd} UN</span>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        };

        const vendaSystem = {
            carrinho: [],
            history: [],
            
            async init() {
                db.collection("vendas").orderBy("id", "desc").limit(50).onSnapshot(snap => {
                    this.history = snap.docs.map(doc => doc.data());
                    if(document.getElementById('section-historico').classList.contains('hidden') === false) ui.renderHistory();
                });
            },

            setPay(m) {
                selectedPay = m;
                selectedCardType = ""; 
                document.querySelectorAll('.pay-btn').forEach(b => b.classList.toggle('active', b.id === `pay-${m}`));
                document.getElementById('card-selection').classList.toggle('hidden', m !== 'Cart√£o');
            },

            setCardSub(t) {
                selectedCardType = t;
                document.querySelectorAll('.sub-pay-btn').forEach(b => b.classList.toggle('active', b.id === `sub-${t}`));
            },

            adicionar(id) {
                if(editMode) return;
                const p = inventory.db.find(x => x.id === id);
                if(!p || p.qtd <= 0) return;
                
                const itemNoCarrinho = this.carrinho.find(i => i.id === id);
                if(itemNoCarrinho) {
                    if(itemNoCarrinho.qV < p.qtd) itemNoCarrinho.qV++;
                } else {
                    this.carrinho.push({id: p.id, nome: p.nome, preco: p.temDesconto ? p.promo : p.venda, qV: 1});
                }
                this.renderCart();
            },

            remover(id) {
                const item = this.carrinho.find(i => i.id === id);
                if(item.qV > 1) item.qV--;
                else this.carrinho = this.carrinho.filter(i => i.id !== id);
                this.renderCart();
            },

            renderCart() {
                const cont = document.getElementById('cart-items');
                let total = 0;
                cont.innerHTML = this.carrinho.map(i => {
                    total += (i.preco * i.qV);
                    return `
                    <div class="flex items-center gap-4 bg-zinc-900/50 p-4 rounded-2xl border border-zinc-800">
                        <div class="flex-1">
                            <p class="text-[10px] font-black uppercase text-white">${i.nome}</p>
                            <p class="text-[9px] text-zinc-500 font-bold">R$ ${i.preco.toFixed(2)}</p>
                        </div>
                        <div class="flex items-center gap-3">
                            <button onclick="vendaSystem.remover('${i.id}')" class="w-8 h-8 bg-zinc-800 rounded-lg">-</button>
                            <span class="text-xs font-black w-4 text-center">${i.qV}</span>
                            <button onclick="vendaSystem.adicionar('${i.id}')" class="w-8 h-8 bg-zinc-800 rounded-lg">+</button>
                        </div>
                    </div>`;
                }).join('');
                document.getElementById('cart-total').innerText = `R$ ${total.toFixed(2)}`;
            },

            async finalizar() {
                if(this.carrinho.length === 0) return;
                if(selectedPay === 'Cart√£o' && !selectedCardType) return alert("Escolha D√©bito ou Cr√©dito!");

                const agora = new Date();
                const totalFinal = this.carrinho.reduce((a, b) => a + (b.preco * b.qV), 0);
                const qtdTotal = this.carrinho.reduce((a, b) => a + b.qV, 0);
                
                const venda = {
                    id: Date.now(),
                    dia: agora.toLocaleDateString('pt-BR'),
                    hora: agora.toLocaleTimeString('pt-BR'),
                    metodo: selectedPay === 'Cart√£o' ? `Cart√£o (${selectedCardType})` : selectedPay,
                    total: totalFinal,
                    itens: [...this.carrinho]
                };

                // Salva Venda no Firebase
                await db.collection("vendas").add(venda);
                
                // Baixa estoque no Firebase
                for(const item of this.carrinho) {
                    const ref = db.collection("produtos").doc(item.id);
                    await db.runTransaction(async (t) => {
                        const doc = await t.get(ref);
                        const novaQtd = doc.data().qtd - item.qV;
                        t.update(ref, { qtd: novaQtd });
                    });
                }
                
                ui.showReceipt(venda, totalFinal, qtdTotal);
                this.carrinho = [];
                this.renderCart();
                this.setPay('Pix');
            }
        };

        const ui = {
            mainTab(t) {
                document.getElementById('section-inventory').classList.toggle('hidden', t !== 'estoque');
                document.getElementById('section-historico').classList.toggle('hidden', t !== 'historico');
                document.getElementById('btn-estoque').classList.toggle('border-b-4', t === 'estoque');
                document.getElementById('btn-historico').classList.toggle('border-b-4', t === 'historico');
                if(t === 'historico') this.renderHistory();
            },

            renderHistory() {
                const cont = document.getElementById('gavetas-container');
                const grupos = {};
                vendaSystem.history.forEach(v => { if(!grupos[v.dia]) grupos[v.dia] = []; grupos[v.dia].push(v); });
                
                cont.innerHTML = Object.keys(grupos).map(dia => {
                    const vendas = grupos[dia];
                    const totalDia = vendas.reduce((a, b) => a + b.total, 0);
                    return `
                    <div class="gaveta">
                        <div class="gaveta-header" onclick="ui.toggleG(this)">
                            <span class="font-black text-sm uppercase">${dia}</span>
                            <span class="text-[#d4af37] font-black">R$ ${totalDia.toFixed(2)}</span>
                        </div>
                        <div class="gaveta-content space-y-3">
                            ${vendas.map(v => `
                                <div class="border-b border-zinc-900 pb-2">
                                    <div class="flex justify-between text-[10px] font-black mb-1">
                                        <span class="text-zinc-500 uppercase">${v.hora} | ${v.metodo}</span>
                                        <span class="text-[#d4af37]">R$ ${v.total.toFixed(2)}</span>
                                    </div>
                                    <div class="text-[9px] text-zinc-400 pl-2">
                                        ${v.itens.map(it => `${it.qV}x ${it.nome}`).join(' | ')}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>`;
                }).join('');
            },

            toggleG(h) {
                const c = h.nextElementSibling;
                c.style.display = (c.style.display === 'block') ? 'none' : 'block';
            },

            openProductModal() {
                document.getElementById('product-modal').classList.remove('hidden');
                setTimeout(() => document.getElementById('product-modal').classList.add('modal-active'), 10);
            },

            closeProductModal() {
                document.getElementById('product-modal').classList.remove('modal-active');
                setTimeout(() => {
                    document.getElementById('product-modal').classList.add('hidden');
                    document.getElementById('edit-id').value = '';
                    document.getElementById('modal-title').innerText = "Novo Item";
                    document.querySelectorAll('#product-modal input').forEach(i => i.value = '');
                }, 300);
            },

            showReceipt(venda, total, qtd) {
                document.getElementById('rec-metodo').innerText = venda.metodo;
                document.getElementById('rec-qtd').innerText = `${qtd} unidades`;
                document.getElementById('rec-total').innerText = `R$ ${total.toFixed(2)}`;
                document.getElementById('rec-list').innerHTML = venda.itens.map(it => `
                    <div class="flex justify-between text-xs border-b border-zinc-900 pb-2">
                        <span class="text-zinc-300 font-bold">${it.qV}x ${it.nome}</span>
                        <span class="text-zinc-500 font-black italic">R$ ${(it.preco * it.qV).toFixed(2)}</span>
                    </div>
                `).join('');
                const modal = document.getElementById('receipt-modal');
                modal.classList.remove('hidden');
                setTimeout(() => modal.classList.add('modal-active'), 10);
            },

            closeReceipt() {
                const modal = document.getElementById('receipt-modal');
                modal.classList.remove('modal-active');
                setTimeout(() => modal.classList.add('hidden'), 300);
            }
        };

        inventory.init();
        vendaSystem.init();
    </script>
</body>
</html>